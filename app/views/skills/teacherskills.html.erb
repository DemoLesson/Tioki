<div id="intro">
	<h2 style="color:#2AA99B; margin-top:0;margin-bottom:5px;">
	Welcome to your skills page!
	</h2>
	<p style="margin:0;">
	Here are a few tips on how to get the most out of Tioki.
	</p>
	<section>
		<p>
		<span class="bold caps">Find New Skills</span><br />
		Use the drop down menu to find new skills.
		</p>
	</section>
	<section>
		<p>
		<span class="bold caps">Explore Technologies</span><br />
		Explore all the new classroom tech associated with that skill.  
		</p>
	</section>
	<section>
		<p>
		<span class="bold caps">Connect With Educators</span><br />
		Connect with educators that share your same skill set. 
		</p>
	</section>
	<section>
		<p>
		<span class="bold caps">Watch Videos</span><br />
		There are many videos related to the variuos skills. Watch and learn!
		</p>
	</section>
</div>

<section id="main-content" class="inner-content">
	<fieldset class="search-connections">
		<h1>
		
		<%= form_tag "/skillpage", :method => :get do %>
		<span style="float:right">
		<%= select_tag :topic, options_from_collection_for_select(Skill.all, "id", "name"), {:style => "margin-top:10px", :prompt => "Want More Content?"} %>
		<input type="submit" value="GO" class="button" />
		</span>
		Discover â†’ <%= @skill.name %>
		<% end %>
		</h1>
	</fieldset>

	<section id="panels">
		<section class="panel one-column left-side">
			
			<h3>Top Technologies</h3>
			<ul>
				<% unless @technologies.empty? %>
					<% @technologies.each do |technology| %>
						<a href="/technologies/<%= technology.id %>">
							<li style="width:275px;padding:12px 15px 12px 15px !important">
								<div style="float:left;" class="profile-thumb-small">
									<%= image_tag(technology.picture(:medium), :width => '45', :height => '45') %>
								</div>
								<strong><%= technology.name %></strong><br />
								<p style="float:left;width:215px">
									<% if technology.description.size > 100 %><%=h (technology.description.gsub(%r{</?[^>]+?>}, '')[0..104]+'...').html_safe %>
									<% else %><%=h technology.description.gsub(%r{</?[^>]+?>}, '').html_safe %>
									<% end %>
								</p>
							</li>
						</a>
					<% end %>
				<% else %>
					<li>Do you know of a great <%= @skill.name %> technology?
						<%= link_to "Send us a note", "/techsuggestion" %> and we'll add it.
					</li>
				<% end %>
			</ul>
		</section>
		
		<section class="panel one-column left-side">
			<h3>Educators</h3>
			<ul>
				<% unless @teachers.empty? %>
					<% @teachers.each do |teacher| %>
						<li style="width:275px;padding:12px 15px 12px 15px !important">
							<div class="profile-thumb-medium" style="float:left;margin-right:10px;margin-bottom:10px;overflow:hidden;">
								<%= link_to image_tag(teacher.user.avatar.url(:medium), :width => '70px', :height => '70px'), "/profile/#{teacher.url}" if teacher.user.avatar? %>
								<%= link_to image_tag("dl_icons/no_avatar_medium.jpg"), "/profile/#{teacher.url}" unless teacher.user.avatar? %>
							</div>
							<strong>
								<%= link_to "#{teacher.user.name}", "/profile/#{teacher.url}", :class => "byline" %>
							</strong><br />
							<p style="width:195px;float:left;">
								<% if teacher.position.present?  && teacher.school.present? %>
									<%= teacher.position %> at <%= teacher.school %><br />
								<% end %>
								<% if teacher.location.present? %>
									<%= teacher.location %><br />
								<% end %><br />
								<% if !self.current_user.nil? && self.current_user.teacher %>	
									<% unless self.current_user == teacher.user %>
										<% if @my_connections.include? teacher.user_id %>
											<%= link_to "Send Message", { :controller => 'messages', :action => 'new', :user_id_to => teacher.user.id.to_s }, {:class => "button bg-green", :style => 'color:#FFF !important;'} %>
										<% else %>
											<%= link_to "Send Message", { :controller => 'messages', :action => 'new', :user_id_to => teacher.user.id.to_s }, {:class => "button bg-green", :style => 'color:#FFF !important;'} %>
											<%= link_to ablang('connection.connect'), { :controller => 'connections', :action => 'add_connection', :user_id => teacher.user.id }, :class => "button", :style => 'color:#FFF !important;' %>
										<% end %>
									<% end %>

								<% else %>
									<%= link_to "Send Message", { :controller => 'messages', :action => 'new', :user_id_to => teacher.user.id.to_s }, {:class => "button bg-green", :style => 'color:#FFF !important;'} %>
								<% end %>
							</p>
							<!--div class="quick-action star-empty">
							</div-->
						</li>
					<% end %>
					<li><%= will_paginate @teachers %></li>
				<% else %>
					<li>No educators showing off skills in <%= @skill.name %>.</li>
				<% end %>
			</ul>
		</section>
		
		<section class="panel one-column right-side">
			
			<h3>Videos</h3>
			<ul>
				<% unless @videodb.empty? %>
					<% @videodb.each do |vid| %>
						<a href="/videos/<%= vid.id %>">
							<li style="width:275px;padding:12px 15px 12px 15px !important">
								<div style="float:left;" class="profile-thumb-small">
									<%= image_tag(vid.thumbnail, :width => '45', :height => '45') %>
								</div>
								<strong><%= vid.name %></strong><br />
								<p style="float:left;width:215px">
									<% if vid.description.size > 100 %><%=h (vid.description.gsub(%r{</?[^>]+?>}, '')[0..104]+'...').html_safe %>
									<% else %><%=h vid.description.gsub(%r{</?[^>]+?>}, '').html_safe %>
									<% end %>
								</p>
							</li>
						</a>
					<% end %>
					<li>
						<%= will_paginate @videodb, :param_name => 'vpage' %>
					</li>
				<% else %>
					<li>No videos showing off skills in <%= @skill.name %>.</li>
				<% end %>
			</ul>
		</section>

		<section id="list" class="panel two-column right-side">
			<h3>Discussions</h3>
			<ul>
				<% @skill.discussions.each do |discussion| %>
					<li>
					<%  if self.current_user && self.current_user.teacher %>
						<div style="float:right">
							<%= link_to "Follow", { :controller => "discussions",:action => "follow_discussion", :id => discussion.id }%>
						</div>
					<% end %>
						<p><%= link_to discussion.title, discussion %></p>
						<p>
						<%= discussion.followers.count %><% if discussion.followers.count == 1 %> follower<% else %> followers<% end %>,
						<%= discussion.comment_threads.count %><% if discussion.comment_threads.count == 1 %> reply<% else %> replies<% end %>
						</p>
						<p>
						<% discussion.skills.each do |skill| %>
							<%= link_to skill.name, "/teacherskills/#{skill.id}" %>
						<% end %>
						</p>
						<p>
							<% discussion.participants.each do |user| %>
								<% if user.avatar? %>
									<%= link_to image_tag(user.avatar.url(:tiny), :style => "max-height:20px;max-width:20px;"), "/profile/#{teacher.teacher.url}" %>
								<% else %>
									<%= link_to image_tag("/assets/dl_icons/no_avatar_tiny.jpg", :style => "max-height:20px;max-width:20px;")  %>
								<% end %>
							<% end %>
						</p>
					</li>
				<% end %>
			</ul>
		</section>
	</section>
</section>

<% if !session[:discovery_viewed] %>
<script type="text/javascript">
	$(document).ready(function() {
		$('body').introOverlay({
			introLength: 10000, // anything numeric no quotes
			transitionSpeed: 400, // ditto
			introAutoFade: false, //timed fade on overlay...true or false
			introCloseBtn: true, //btn to close overlay...true or false
			introTransition: 'fade', //different transition options 'fade', 'slideUp', 'slideLeft', 'slideCenter'
			openAnimation: true, //opening animation...true or false
			introContent: '#intro', //where the content is at, uses css selector # for id, and . for class
			cookieActive : false,
			/* also you can use 'href' to load content for a seperate page..
			when using href it also uses the class of the clicked element to find the content...
			it goes like this .load(href class); check source for use */ 
			introTemplate: 'full', // either 'full' or 'module'
			introTurnOffLights: false, //turn off and on lights...true or false
		});
	});
</script>
<% end %>
<% session[:discovery_viewed] = true %>
